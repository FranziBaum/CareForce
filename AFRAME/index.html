<!DOCTYPE html>
<!-- A-Frame wird, wie auch p5, in einer HTML Seite eingebunden -->
<html>
<head>
  <!-- im Head werden Angaben zum Titel und zu Metadaten gemacht-->
  <title>May the CareForce be with you!</title>
  <meta charset="utf-8">

  <!-- nachfolgend werden die stylesheets und Skripte eingebunden -->
  <link rel="stylesheet" href="css/style.css">
  <script src="js/aframe.min.js"></script>
  <!-- A-Frame Framework -->
  <script src="js/component_interactive.js"></script>
  <script src="js/component_feedback.js"></script>
  <script src="js/component_handy.js"></script>


</head>

<body>
  <!-- Da es sich um ein HTML Dokument handelt gibt es einen body-tag für den Inhalt -->
  <a-scene id="scene1" shadow="basic" stats background="color: lightblue">
    <a-animation attribute="color" begin="1000" dur="30000" to="black" repeat="indefinite" direction="alternate"></a-animation>
    <!-- Den Rahmen der VR Anwendung bildet der Tag <a-scene>. Hier wird also die "Szene" angelegt.-->
    <a-box position="0 0.7 0" height="0.2">
      <!-- Hier wird eine Box erstellt. Sie verkörpert die nachfolgend erstellten Lichter.-->
      <a-entity light="type: point;
                        castShadow: true; 
                        intensity:0.5; 
                        decay: 2;" position="0 0 0"></a-entity>
      <a-entity light="type: ambient; 
                        intensity:0.5; 
                        decay: 2;" position="0 0 0"></a-entity>
      <!-- Es gibt verschiedene Arten von Lichtern (type). Diese können Schatten werfen (castShadow). Die Intensität kann auch verändert werden (intensity). Die Stärke des Abklingens kann auch verändert werden (decay).-->
    </a-box>
    <a-sphere position="0 30 -13" height="0.2" color="yellow" shadow="cast: false; receive: false">


      <!-- Hier wird eine Box erstellt. Sie verkörpert die nachfolgend erstellten Lichter.-->
      <a-entity id="sun" light="type: point;
                          castShadow: true; 
                          intensity:0.5; 
                          decay: 2;" position="0 0 0">
        <a-animation attribute="light.intensity" begin="0.5" dur="30000" to="0" repeat="indefinite" direction="alternate"></a-animation>


      </a-entity>
    </a-sphere>
    <a-assets>
      <!-- Hier werden die Assets (Objekte, Bilder, Sounds, etc.) geladen mit denen wir arbeiten möchten.-->
      <a-asset-item id="room_dae" src="assets/room.dae"></a-asset-item>
      <a-asset-item id="schrank_dae" src="assets/schrank.dae"></a-asset-item>
      <a-asset-item id="brille_dae" src="assets/brille.dae"></a-asset-item>
      <a-asset-item id="handy_dae" src="assets/handy.dae"></a-asset-item>
      <a-asset-item id="cat_dae" src="assets/cat2.dae"></a-asset-item>
      <a-asset-item id="heart_obj" src="assets/heart.obj"></a-asset-item>
      <a-asset-item id="plattenspieler_dae" src="assets/plattenspieler.dae"></a-asset-item>
      <a-asset-item id="platte_dae" src="assets/platte.dae"></a-asset-item>
    </a-assets>

    <a-camera position="-0.1 0.15 1" rotation="0 0 0" id="kamera1" look-controls fov="80">
      <!-- Hier wird dei Kamera/Sicht des Nutzers erstellt -->
      <a-entity cursor="fuse: true; fuseTimeout: 1500" position="0 0 -0.5" geometry="primitive: circle; radius: 0.1" material="color: black; shader: flat; transparent: true; opacity: 0.8"
        scale="0.1 0.1 0.1" raycaster="interval: 1000; objects: .clickable">
        <!-- Hier wird der Cursor mit seinen Animationen definiert -->
        <a-animation begin="fusing" easing="ease-out" attribute="scale" dur="100" fill="forwards" from="0.1 0.1 0.1" to="0.13 0.13 0.13"></a-animation>
        <a-animation begin="fusing" easing="ease-in" attribute="material.color" dur="50" fill="forwards" from="black" to="white"></a-animation>
        <a-animation begin="fusing" easing="ease-in" attribute="scale" dur="1000" delay="100" fill="forwards" from="0.13 0.13 0.13"
          to="0.04 0.04 0.04"></a-animation>
        <a-animation begin="click" easing="ease-in" attribute="material.color" dur="200" fill="forwards" from="white" to="black"></a-animation>
        <a-animation begin="click" attribute="scale" dur="300" fill="forwards" easing="ease-in" from="0.04 0.04 0.04" to="0.1 0.1 0.1"></a-animation>
      </a-entity>
    </a-camera>

    <!-- Jetzt werden die 3D Objekte mit den geladenen Assets hinzugefügt
        Interaktive Objekte weisen die Komponente "interactive" auf.
    -->

    <a-collada-model handy id="handy" src="#handy_dae" position="0 -0.6 0" rotation="0 90 0" shadow="cast: false; receive: false;">
      <a-text id="uhr" value="12:30" rotation="-90 0 0" align="center" color="white" position="0.5 -0.3972 -0.5" wrap-count="150"></a-text>
    </a-collada-model>

    <a-collada-model id="raum" src="#room_dae" position="0 0 0" rotation="0 0 0" shadow="cast: true; receive: true;"></a-collada-model>

    <a-collada-model interactive class="clickable" id="schrank" src="#schrank_dae" position="0 0 0" rotation="0 0 0" shadow="cast: true; receive: true;"></a-collada-model>

    <a-collada-model interactive="event: found" class="clickable" id="brille" src="#brille_dae" position="-3, -0.85, 1" rotation="0 0 0"
      shadow="cast: true; receive: true;">
      <a-animation easing="ease-in" attribute="position" begin="found" dur="5000" to="0 0 0"></a-animation>
    </a-collada-model>

    <a-obj-model feedback id="heart" src="#heart_obj" position="2.5 -0.5 0" rotation="0 0 0" shadow="cast: true; receive: true;"></a-obj-model>

    <a-collada-model interactive="event: play" class="clickable" id="plattenspieler" src="#plattenspieler_dae" position="0 0 2.4"
      rotation="0 0 0" shadow="cast: true; receive: true;">
      <a-collada-model id="platte" src="#platte_dae" position="0 0 0" rotation="0 0 0" shadow="cast: true; receive: true;">
        <a-animation attribute="rotation" begin="play" dur="30000" to="0 1300 0"></a-animation>
      </a-collada-model>
    </a-collada-model>
    </a-collada-model>



  </a-scene>
</body>

</html>